<head>
  <%= stylesheet_link_tag 'application'%>
</head>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="#"><%= button_to "logout", {:controller => 'sessions', :action => 'destroy', :id => session[:user_id] }, {:method => :delete}%></a>
                    </li>
                    <li>
                        <a href="#"><%=button_to "Register", {:controller => 'users', :action => 'signup'}, {id: 'register-button', class: 'button'} %></a>
                    </li>
                    <li>
                      <%unless User.find(session[:user_id]).screen_name == @screen_name%>
                        <% main_user = User.find(session[:user_id]).screen_name%>
                        <a href="#"><%= button_to "Go Back", users_path(screen_name: main_user)%></a>
                      <%end%>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <form class="navbar-form navbar-right" role="search">
                          <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search Twitter User">
                          </div>
                          <button type="submit" class="btn btn-default">Search</button>
                        </form>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

<!-- Graph -->
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/stock/modules/exporting.js"></script>
<%= javascript_include_tag 'graph.js' %>

<!-- Twitter Stream Widget -->
<%= javascript_include_tag 'twitter_stream.js'%>



<div class="profile-display">
  <!-- <table id="buttons"> -->
    <!-- <tr> -->
  <!-- Logout Button -->
      <!-- <td> -->
        <!-- <p class="logout"><%#= button_to "logout", {:controller => 'sessions', :action => 'destroy', :id => session[:user_id] }, {:method => :delete}%></p> -->
      <!-- </td> -->

  <!-- Email Registration -->
      <!-- <td> -->
        <!-- <h3><%#=button_to "Register", {:controller => 'users', :action => 'signup'}, {id: 'register-button', class: 'button'} %></h3> -->
      <!-- </td> -->


  <!-- Search twitter users box -->
<!--         <%#=form_tag("/users/show", method: "get") do %>
      <td>
          <%#=text_field_tag "screen_name", nil, options = {style:"height:3.05em; min-width: 15em; margin-left: .50em; margin-right: 0.50em; position: relative",  placeholder: "search twitter user"} %>
      </td>
      <td>
          <%#= submit_tag("Search")%>
        <%#end%>
      </td>
    </tr> -->

  <!-- Button to go back if not on main account -->
<!--     <tr>
    <%#unless User.find(session[:user_id]).screen_name == @screen_name%>
      <td>
        <%# main_user = User.find(session[:user_id]).screen_name%>
        <p class="logout"><%= button_to "Go Back", users_path(screen_name: main_user)%></p>
      </td>
    <%#end%>
    </tr>
  </table> -->

  <!-- Flash Notices -->
  <% if flash[:notice] %>
    <div class="notice"><b><%= flash[:notice] %></b></div>
  <% end %>

  <!-- User welcome "if user exists" -->
  <%if User.find(session[:user_id]).screen_name == @screen_name%>
    <h1 id="greeting">Welcome, <%=@user.name%></h1>
    <br>
  <%end%>

  <!-- Showing user's information -->
  <h3 class="info">Total Tweets: <%=@num_tweets%></h3>
  <h3 class="info">Following: <%=@num_following%></h3>
  <h3 class="info">Current Followers: <%=@followers_count%></h3>
  <div class="profile-picture">
    <img src="<%=@profile_picture%>">
  </div>

  <!-- container that holds the graph -->
  <div id="container" style="height: 400px; min-width: 310px"></div>


  <!-- Most recent tweets -->
    <div id='timeline'>
      <h3 id="tweet-label">Tweets</h3>
      <h3 id="tweets"> </h3>
  <!-- div to include the tweets at a certain time -->
      <div id="new-tweets"></div>
      <div class="tweet-stream">
        <a class="twitter-timeline" href="https://twitter.com/<%=@screen_name%>" data-widget-id="668249419062509568" data-screen-name="<%=@screen_name%>" data-chrome="noheader nofooter"></a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
      </div>
    </div>

  <!-- Followers and Unfollowers at a specific point of time -->
    <%if User.find(session[:user_id]).screen_name == @screen_name%>
      <div class="follower-activity">
        <div id="followers-div">
            <h3>New Followers</h3>
          <div>
            <table id="new_followers" style="width:20%"></table>
          </div>
        </div>

        <div id="unfollowers-div">
          <h3>Unfollowers</h3>
          <div>
            <table id="unfollowers" style="width:20%"></table>
          </div>
        </div>
      </div>
    <%end%>
</div>

<!-- Hidden Data-->
  <p class="screen_name"><%=@screen_name %></p>

  <p class="xData">
    <%= @xData %>
  </p>

  <p class="followers_record">
    <%= @followers_record %>
  </p>

  <p class="favorites">
    <%= @favorites %>
  </p>

  <p class="data_changes">
    <%= @data_changes %>
  </p>